# å€‹äºº Docker Compose é…ç½®è¦†å¯«ç¯„æœ¬
# 
# ğŸ“– ä½¿ç”¨èªªæ˜ï¼š
# 1. è¤‡è£½æ­¤æª”æ¡ˆä¸¦é‡æ–°å‘½åç‚º docker-compose.override.yml
#    cp docker-compose.override.yml.example docker-compose.override.yml
# 
# 2. æ ¹æ“šæ‚¨çš„æœ¬æ©Ÿç’°å¢ƒéœ€æ±‚ä¿®æ”¹é…ç½®
# 
# 3. âš ï¸ ä¸è¦å°‡ docker-compose.override.yml æäº¤åˆ° Git
#    (å·²åœ¨ .gitignore ä¸­è¨­å®š)
# 
# ğŸ¯ å¸¸è¦‹ä½¿ç”¨æƒ…å¢ƒï¼š

services:
  # ============================================
  # MySQL è³‡æ–™åº«æœå‹™ - å€‹äººç’°å¢ƒé©é…
  # ============================================
  mysql:
    # å¦‚æœ 3306 ç«¯å£è¢«ä½”ç”¨ï¼Œæ”¹ç”¨å…¶ä»–ç«¯å£
    # ports:
    #   - "3307:3306"  # å°‡æœ¬æ©Ÿçš„ 3307 å°æ‡‰åˆ°å®¹å™¨çš„ 3306
    
    # å¦‚æœéœ€è¦è‡ªè¨‚è³‡æ–™å­˜æ”¾è·¯å¾‘
    # volumes:
    #   - /your/custom/path:/var/lib/mysql
    #   - ./init:/docker-entrypoint-initdb.d
    
    # å¦‚æœéœ€è¦ä¸åŒçš„è¨˜æ†¶é«”é™åˆ¶
    # mem_limit: 1g
    # mem_reservation: 512m

  # ============================================
  # Flask æ‡‰ç”¨ç¨‹å¼æœå‹™ - å€‹äººç’°å¢ƒé©é…
  # ============================================
  flask:
    # å¦‚æœ 5001 ç«¯å£è¢«ä½”ç”¨ï¼Œæ”¹ç”¨å…¶ä»–ç«¯å£
    # ports:
    #   - "5002:5000"  # å°‡æœ¬æ©Ÿçš„ 5002 å°æ‡‰åˆ°å®¹å™¨çš„ 5000
    
    # å¦‚æœéœ€è¦æ›è¼‰é¡å¤–çš„é–‹ç™¼ç›®éŒ„
    # volumes:
    #   - ./app:/app
    #   - ./logs:/app/logs
    
    # å¦‚æœéœ€è¦å€‹äººå°ˆå±¬çš„ç’°å¢ƒè®Šæ•¸
    # environment:
    #   DEBUG: "True"
    #   LOG_LEVEL: "DEBUG"

  # ============================================
  # phpMyAdmin æœå‹™ - å€‹äººç’°å¢ƒé©é…
  # ============================================
  phpmyadmin:
    # å¦‚æœ 8080 ç«¯å£è¢«ä½”ç”¨ï¼Œæ”¹ç”¨å…¶ä»–ç«¯å£
    # ports:
    #   - "8081:80"  # å°‡æœ¬æ©Ÿçš„ 8081 å°æ‡‰åˆ°å®¹å™¨çš„ 80

# ============================================
# å¸¸è¦‹å€‹äººåŒ–é…ç½®ç¯„ä¾‹
# ============================================

# ç¯„ä¾‹ 1: Windows ç”¨æˆ¶å¯èƒ½éœ€è¦çš„é…ç½®
# services:
#   mysql:
#     volumes:
#       - mysql_data:/var/lib/mysql
#       - ./init:/docker-entrypoint-initdb.d:ro
#   flask:
#     volumes:
#       - ./app:/app:cached
#     environment:
#       PYTHONPATH: "/app"

# ç¯„ä¾‹ 2: macOS ç”¨æˆ¶æ•ˆèƒ½å„ªåŒ–
# services:
#   flask:
#     volumes:
#       - ./app:/app:delegated
#     environment:
#       DOCKER_BUILDKIT: "1"

# ç¯„ä¾‹ 3: é–‹ç™¼é™¤éŒ¯é…ç½®
# services:
#   flask:
#     ports:
#       - "5001:5000"
#       - "5678:5678"  # Python debugger port
#     environment:
#       FLASK_DEBUG: "1"
#       PYTHONDONTWRITEBYTECODE: "1"
#     command: ["python", "-m", "debugpy", "--listen", "0.0.0.0:5678", "--wait-for-client", "app.py"]

# ç¯„ä¾‹ 4: å¤šå°ˆæ¡ˆä¸¦è¡Œé–‹ç™¼
# services:
#   mysql:
#     ports:
#       - "3307:3306"  # AI-project ç”¨ 3307
#   flask:
#     ports:
#       - "5002:5000"  # AI-project ç”¨ 5002
#   phpmyadmin:
#     ports:
#       - "8082:80"    # AI-project ç”¨ 8082